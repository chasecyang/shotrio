# 美术风格初始化功能

## 概述

将原先需要手动执行的 `scripts/seed-art-styles.ts` 脚本改造为管理后台的界面功能，允许管理员通过界面直接初始化美术风格数据。

## 实现内容

### 1. 新增 Server Action

**文件**: `src/lib/actions/admin/art-style-admin.ts`

新增 `initializeArtStyles()` 函数：

- **功能**: 从 `INITIAL_ART_STYLES` 导入预设的美术风格数据
- **权限**: 仅管理员可执行（通过 `requireAdmin()` 验证）
- **特性**:
  - 自动检查已存在的风格，避免重复导入
  - 返回详细的执行结果（新创建数量、跳过数量）
  - 自动刷新页面缓存

### 2. 管理后台界面

**文件**: `src/components/admin/art-styles/style-table.tsx`

在美术风格管理页面添加"初始化美术风格"按钮：

- **位置**: 页面右上角，"创建风格"按钮左侧
- **图标**: Database 图标（lucide-react）
- **交互**:
  - 点击前会弹出确认对话框
  - 执行时显示加载状态（按钮禁用 + 旋转图标）
  - 完成后通过 toast 显示详细结果
  - 自动刷新页面数据

## 使用方法

1. 以管理员身份登录系统
2. 访问 `/admin/art-styles` 页面
3. 点击右上角"初始化美术风格"按钮
4. 确认操作后，系统会自动导入所有预设风格
5. 查看 toast 提示了解导入结果

## 预设风格列表

系统包含 8 个预设美术风格：

1. **现代动漫** (Modern Anime) - 日系现代动漫风格
2. **电影写实** (Cinematic Realistic) - 电影级写实风格
3. **水彩柔和** (Soft Watercolor) - 温柔水彩画风格
4. **古典油画** (Classic Oil Painting) - 经典油画风格
5. **3D卡通** (Pixar 3D) - 皮克斯风格3D渲染
6. **赛博朋克** (Cyberpunk Neon) - 未来赛博朋克风格
7. **中国水墨** (Chinese Ink Painting) - 传统中国水墨画风格
8. **美式漫画** (Western Comic) - 美式漫画风格

## 技术细节

### 权限控制

- 使用 `requireAdmin()` 确保只有管理员能执行初始化
- 非管理员访问会抛出 401 错误

### 幂等性

- 每次执行前检查风格 ID 是否已存在
- 已存在的风格会被跳过，不会重复创建
- 可以安全地多次执行

### 错误处理

- 单个风格创建失败不会影响其他风格
- 所有错误都会被记录到控制台
- 用户界面会显示友好的错误提示

## 与原脚本的区别

原 `scripts/seed-art-styles.ts` 脚本已被删除，所有功能已迁移到管理后台。

| 特性 | 原脚本 | 新功能 |
|------|--------|--------|
| 执行方式 | 命令行手动执行 (`npm run seed:art-styles`) | 管理后台界面点击 |
| 权限验证 | 需要数据库连接权限 | 需要管理员登录权限 |
| 用户体验 | 需要技术背景 | 可视化界面操作 |
| 反馈信息 | 控制台日志 | Toast 提示 + 页面刷新 |
| 安全性 | 需要服务器访问 | Web 应用权限控制 |
| 维护状态 | 已删除 | 正在使用 |

## 注意事项

1. 初始化操作需要管理员权限
2. 建议在系统首次部署时执行一次
3. 重复执行是安全的，已存在的风格会被跳过
4. 初始化后的风格可以在管理后台进行编辑和删除
5. 可以为每个风格生成预览图（通过"生成预览图"功能）

## 后续优化建议

1. 可以添加批量生成预览图功能
2. 可以支持自定义导入风格配置文件
3. 可以添加风格导出功能

